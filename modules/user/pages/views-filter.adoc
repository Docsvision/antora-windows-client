= Фильтрация данных представления

{wincl} предоставляет возможность фильтрации данных в представлении папки.

.Есть два типа фильтрации:
* Фильтрация по текущей странице представления -- простая фильтрация для папок с небольшим количеством карточек.
* Фильтрация по всем страницам представления -- настраиваемая фильтрация для папок с любым количеством карточек.

[#current-page]
== Фильтрация по текущей странице представления

Данный тип фильтрации является простой фильтрацией данных по текущей странице представления. Данные с других страниц представления в фильтрации не участвуют. Фильтрация выполняется на стороне клиента.

.Чтобы отфильтровать данные, выполните следующие действия:
. Подведите курсор к правой части заголовка нужной колонки. Справа от названия колонки появится кнопка настройки фильтра.
+
.Кнопка настройки фильтра по колонке в представлении
image::filter-futton.png[Кнопка настройки фильтра по колонке в представлении]
+
. Нажмите на кнопку настройки фильтра. Будет открыт список возможных значений фильтра для данного столбца.
. Выберите значения в списке и нажмите в пустой области представления. +
Кнопка настройки фильтра при этом изменит вид на image:buttons/filter-filtered.png[Отфильтровано], в представлении будут оставлены только данные, соответствующие условию фильтрации.
+
. Аналогичным образом настройте условия фильтрации для других столбцов представления.
. Чтобы убрать условие фильтрации по колонке представления, в настройках фильтра нажмите кнопку *Очистить фильтр*.

[#all-pages]
== Фильтрация по всем страницам представления

[WARNING]
====
Функция фильтрации при работе с БД {pgsql} была добавлена в модуле {pl} версии 5.5.3.
====

Данный тип фильтрует данные по всем страницам представления папки. Фильтрация осуществляется на стороне сервера {dv}.

[WARNING]
====
Фильтрация по всем страницам представления недоступна для папок с представлением "Дайджест", а также системных папок: "Конструкторы и справочники", "Папки", "Карточки", "Корзина".

В этом случае используйте <<current-page,фильтрацию по текущей странице>> или выберите другое представление (для обычных папок).
====

Для использования данного типа фильтрации также есть другие ограничения, которые указаны далее по тексту.

.Чтобы отфильтровать данные, выполните следующие действия:
. Нажмите на кнопку настройки фильтра image:buttons/server-filter.png[Буква Т с увеличительным стеклом], расположенную на панели инструментов представления.
+
При этом кнопка настройки фильтра изменит вид на image:buttons/server-filter-close.png[Воронка], справа от которой будут показаны инструменты для настройки фильтра.
+
.Кнопка настройки фильтра на панели инструментов представления
image::filter-server-open.png[Кнопка настройки фильтра на панели инструментов представления]
+
. Задайте фильтр с помощью инструментов настройки фильтра.
+
.Инструменты настройки фильтра
image::filter-server-settings.png[Инструменты настройки фильтра]
+
.. В первом поле выберите колонку представления, для которой настраивается фильтр.
//+
//Фильтр не может быть применен к колонкам, значение которых является вычисляемым -- такие колонки в списке не отображаются.
//+
.. Во втором поле введите значение для условия фильтрации по выбранному столбцу.
+
--
* Для колонки со строковыми значениями или идентификаторами, значение для условия вводится в виде строки.
* Для колонки, содержащей значение типа "Дата/время", значение для условия может быть введено в виде строки или выбрано с помощью инструмента "Календарь".
* Для колонки, содержащей элемент "Да/нет", значение для условия выбирается из списка.
--
+
****
.Результатом фильтрации станет набор строк представления, у которых в выбранной колонке:
* Для строковых значений -- содержится указанный текст.
* Для значений "Дата/время" -- дата равна указанной дате (время не учитывается).
* Для элементов "Да/нет" -- значение равно выбранному в списке значению.
****
+
.. Чтобы добавить дополнительное условие для фильтра, нажмите кнопку image:buttons/plus-black.png[Жирный плюс] и настройте условие. При этом ранее настраиваемое условие будет добавлено в список условий фильтра.
+
.Настройки фильтра со списком условий
image::server-filter-conditions.png[Настройки фильтра со списком условий]
+
* Для одной колонки может быть настроено несколько условий -- данные условия применяются по правилу `ИЛИ`, т.е. в результатах фильтрации будут записи подходящие под первое, второе или третье (и т.д.) условие.
* Условия настроенные для разных колонок применяются по правилу `И`, т.е. результатах фильтрации будут записи подходящие под первое, второе и третье (и т.д.) условия.
+
.. Чтобы изменить условие фильтра, кликните по нему в списке условий. Условие будет удалено из списка и станет доступным для редактирования.
.. Чтобы удалить условие из фильтра, нажмите на *x* в блоке условия в списке условий.
.. Чтобы удалить все условия фильтра, нажмите на image:buttons/clear-server-filter.png[Воронка с крестиком].
. Нажмите image:buttons/magn-glass.png[Лупа], чтобы применить настроенный фильтр.
+
Если инструменты настройки фильтра содержат не добавленное условие, оно будет добавлено в список условий фильтра автоматически. В строке со списком условий фильтра будет скрыт флаг *&#42;*, указывающий на то, что данные условия фильтра ещё не применялись.
+
В представлении папки будут показаны карточки, соответствующие условиям фильтра.
+
. Чтобы закрыть панель инструментов фильтра, нажмите на кнопку image:buttons/server-filter-close.png[Воронка].

NOTE: Настроенные условия фильтра сохраняются для данной папки при переходе к другим папкам и изменении представления. При перезапуске {wincl}а, условия фильтра будут сброшены.
